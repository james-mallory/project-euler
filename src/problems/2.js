/*
 
Even Fibonacci numbers

Problem 2

Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:

1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...

By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.


 */

import getIsMultipleOf from '../utils/factoring';

const MAX = 4000000;
const values = [0, 1, 1];

let sum = 0;
let nextIndex = 0;

function solve() {
    let nextValue = 0;
    while (nextValue <= MAX) {
        const currentIndex = getPreviousIndex(nextIndex);
        const prevIndex = getPreviousIndex(currentIndex);

        nextValue = values[prevIndex] + values[currentIndex];
        values[nextIndex] = nextValue;

        if (getIsMultipleOf(nextValue, 2)) {
            sum += nextValue;
        }

        nextIndex = prevIndex;
    }

    console.log(`Solution: ${sum}`);
}

function getPreviousIndex(current) {
    return (current + (values.length - 1)) % values.length; // 0 -> 2, 1 -> 0, 2 -> 1
}

console.time(`solve`);
solve();
console.timeEnd(`solve`);
